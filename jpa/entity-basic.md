# jpa-entity-basic.md

## 개요
엔티티(Entity)는 "DB 테이블과 연결되는 자바 객체"입니다.
JPA는 이 엔티티를 기준으로 저장, 조회, 수정 같은 작업을 처리합니다.
즉, JPA에서 개발자는 SQL보다 "엔티티 객체"를 중심으로 생각하게 됩니다.

## 정의
- Entity(엔티티)
  - JPA가 관리하는 클래스(객체)입니다.
  - DB의 테이블과 매핑되며, JPA가 이 객체를 기준으로 DB 작업을 합니다.
- 매핑(Mapping)
  - 자바 필드와 DB 컬럼을 연결하는 규칙입니다.
  - "이 클래스는 어떤 테이블", "이 필드는 어떤 컬럼" 같은 연결입니다.

## 핵심 개념
- 엔티티는 "테이블 한 줄(로우)"을 객체로 표현한 것에 가깝습니다.
- 엔티티에는 반드시 식별자(기본 키)가 필요합니다.
  - JPA는 기본 키로 엔티티를 구분하고 관리합니다.
  - 기본 키가 없으면 저장, 조회, 변경 관리가 어려워집니다.
- 엔티티는 JPA가 인스턴스를 만들 수 있어야 합니다.
  - 기본 생성자가 필요합니다(보통 public 또는 protected).
- 컬럼 제약조건도 엔티티 필드에서 설정할 수 있습니다.
  - null 허용 여부, 중복 허용 여부, 문자열 길이 같은 것들입니다.

## 동작 방식
- 개발자가 엔티티 클래스를 만들고 매핑 정보를 지정합니다.
- JPA는 엔티티 정보를 보고 테이블과 컬럼을 연결합니다.
- 실행 중에는 엔티티 매니저가 엔티티를 관리하면서 DB에 반영합니다.
  - 저장하면 insert 쿼리가 나가고
  - 조회하면 select 결과가 엔티티로 매핑됩니다.
  - 변경이 감지되면 update로 반영됩니다(트랜잭션 기준).

## 전체 흐름
1) 엔티티 클래스 작성(테이블, 컬럼, 기본 키 매핑)
2) 애플리케이션 실행 시 JPA가 엔티티 메타 정보를 읽음
3) 저장/조회 같은 작업을 엔티티 기준으로 수행
4) 내부에서 SQL이 실행되고, 결과는 엔티티 객체로 돌아옴
5) 기본 키로 엔티티를 구분하면서 상태를 관리함

## 실무 포인트
- 엔티티는 DTO처럼 막 쓰기보다 "DB에 저장되는 모델"로 다룹니다.
  - 화면 응답용 DTO와 분리하는 이유가 여기서 생깁니다.
- 기본 키 전략은 팀 규칙이 중요합니다.
  - 개발자가 직접 넣는 방식도 있고, DB에게 맡기는 방식도 있습니다.
  - 무엇을 쓰든 "기본 키는 반드시 필요"는 고정입니다.
- 컬럼 제약조건은 엔티티에서 걸 수 있지만, DB 제약과 함께 맞추는 것이 안전합니다.
  - 예를 들어 unique는 엔티티에도 걸 수 있지만, 최종 안전장치는 DB 제약입니다.

## 용어 정리
| 용어 | 뜻 |
| --- | --- |
| Entity | 테이블과 매핑되는 JPA 관리 객체 |
| Mapping | 클래스, 필드와 테이블, 컬럼을 연결하는 규칙 |
| Id(식별자) | 엔티티를 구분하는 기본 키 |
| Column 제약 | null 여부, unique 여부, length 같은 제약 설정 |
| EntityManager | 엔티티를 관리하고 DB 작업을 실행하는 핵심 객체 |

## 질문
- 엔티티에 기본 키가 없으면 왜 문제가 될까요?
- 엔티티와 DTO를 분리하는 이유를 내 말로 설명하면 뭐라고 할까요?
- unique 제약을 엔티티에만 걸면 위험한 이유는 뭘까요?
- 기본 키를 DB에게 맡기는 방식은 어떤 장점이 있을까요?

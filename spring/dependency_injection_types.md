
# Spring에서 의존성 주입 방식 정리

## 핵심 개념

스프링에서 보통 이야기하는 의존성 주입 방식은 다음과 같습니다.

- 생성자 주입 (Constructor Injection)
- 세터 주입 (Setter Injection)
- 필드 주입 (Field Injection)

여기서 세터 주입은 넓게 보면 메서드 주입(Method Injection)의 한 종류입니다.  
즉, 개념적으로는 다음과 같이 볼 수 있습니다.

- 생성자 주입
- 메서드 주입 (세터 주입 포함)
- 필드 주입

---

## 생성자 주입 (Constructor Injection)

의존성을 생성자의 파라미터로 받는 방식입니다.

- 필수 의존성 주입에 적합합니다.
- 필드를 final로 둘 수 있어 불변성을 유지하기 좋습니다.
- 스프링 컨테이너 없이도 순수 자바 코드로 테스트하기가 쉽습니다.
- 스프링에서 가장 권장하는 기본 주입 방식입니다.

---

## 세터 주입 (Setter Injection)

setXxx(...) 형태의 세터 메서드에 의존성을 주입하는 방식입니다.

- 선택적 의존성에 적합합니다. (없어도 동작 가능한 경우 등)
- 객체 생성 이후에도 의존성을 바꿀 수 있어 유연하지만, 상태 변경으로 인해 설계가 흐려질 수 있습니다.
- 세터도 메서드이므로, 세터 주입은 메서드 주입의 한 종류로 볼 수 있습니다.

---

## 일반 메서드 주입 (Method Injection)

세터가 아닌 일반 메서드의 파라미터로 의존성을 주입받는 방식입니다.

```java
@Component
public class MyService {

    private A a;
    private B b;

    @Autowired
    void init(A a, B b) {
        this.a = a;
        this.b = b;
        // a, b를 이용한 초기화 로직
    }
}
````

* 여러 의존성을 한 번에 주입하면서 초기화 로직을 함께 처리하고 싶을 때 사용할 수 있습니다.
* 객체 생성 이후에 주입된다는 점에서 세터 주입과 유사하지만, 꼭 setXxx 형태일 필요는 없습니다.
* 코드 스타일과 초기화 패턴의 차이 정도이고, 생성자 주입보다 자주 쓰이는 편은 아닙니다.

---

## 필드 주입 (Field Injection)

필드에 직접 어노테이션을 붙여 주입하는 방식입니다.

```java
@Component
public class MyService {

    @Autowired
    private A a;
}
```

* 코드가 가장 간단해 보이는 방식입니다.
* 하지만 DI 컨테이너 없이 테스트하기 어렵고, 생성 시점에 의존성을 명확히 드러내기 어렵습니다.
* final 필드를 사용할 수 없습니다.
* 의존성이 숨겨져 설계가 지저분해지기 쉬워, 최근에는 주로 지양하는 방식입니다.

---

## 실무에서 고려 할 포인트

* 기본 주입 방식은 생성자 주입으로 사용하는 것이 좋습니다.(테스트 시 good)
* 선택적인 의존성이나 객체 생성 이후 변경 가능한 설정은 세터 주입 또는 일반 메서드 주입으로 분리할 수 있습니다.
* 필드 주입은 테스트, 유지보수, 설계 측면에서 불리하므로 특별한 이유가 없다면 사용을 피하는 것이 좋습니다.

---

## 용어 정리

| 키워드                      | 설명                                             |
| ------------------------ | ---------------------------------------------- |
| 의존성 주입(DI)               | 객체가 직접 의존성을 생성하지 않고, 외부에서 필요한 객체를 주입받는 설계 방식   |
| 생성자 주입                   | 생성자의 파라미터로 의존성을 전달받는 주입 방식                     |
| 세터 주입                    | setXxx 형태의 메서드를 통해 의존성을 주입하는 방식                |
| 메서드 주입(Method Injection) | 일반 메서드 파라미터로 의존성을 주입하는 방식. 세터 주입을 포함하는 더 넓은 개념 |
| 필드 주입                    | 필드에 직접 어노테이션을 붙여 의존성을 주입하는 방식                  |
| 필수 의존성                   | 없으면 객체가 정상적으로 동작할 수 없는 의존성                     |
| 선택적 의존성                  | 없어도 기본 동작은 가능하지만 있으면 추가 기능을 제공하는 의존성           |
| 불변성                      | 객체 생성 이후 내부 상태가 변경되지 않는 성질                     |
| 테스트 용이성                  | 의존성 주입 방식에 따라 단위 테스트를 작성하고 실행하기 쉬운 정도          |


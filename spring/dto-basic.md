# dto-basic

## 개요
DTO(Data Transfer Object)는 “데이터를 전송하기 위한 객체”입니다.
클라이언트가 보내는 요청 데이터를 자바 객체로 받거나, 서버가 클라이언트에 내려줄 데이터를 담아 반환할 때 사용합니다.

또한 컨트롤러, 서비스 등 서버 내부 계층 사이에서 데이터를 이동시키는 용도로도 쓰입니다.

## 정의
- DTO: 데이터 전송/이동을 위한 객체
- RequestDto: 클라이언트가 보낸 요청 데이터를 담는 DTO
- ResponseDto: 클라이언트에 반환할 응답 데이터를 담는 DTO
- Entity(또는 도메인 객체): DB와 매핑되거나 비즈니스 규칙을 담는 객체(그대로 외부에 노출하지 않는 게 일반적)

## DTO를 쓰는 이유
### 1) “요청 스펙”과 “내부 모델”을 분리
- 클라이언트 요청은 언제든 바뀔 수 있습니다.
- 내부 엔티티 구조까지 클라이언트에 맞춰 흔들리면 유지보수가 어려워집니다.
- 그래서 요청/응답의 모양(스펙)은 DTO로 고정하고, 내부 엔티티는 내부 목적대로 설계합니다.

### 2) 엔티티를 그대로 응답으로 내리지 않기
- 엔티티에는 DB 컬럼, 내부 식별자, 운영용 필드 같은 “외부에 불필요하거나 위험한 값”이 섞일 수 있습니다.
- DTO로 변환하면 “클라이언트에 필요한 필드만” 내려줄 수 있습니다.

### 3) 계층 간 데이터 이동을 단순화
- 컨트롤러가 파라미터 여러 개를 서비스로 넘기면 점점 복잡해집니다.
- DTO로 묶어 전달하면 메서드 시그니처가 안정적이고 변경에 강해집니다.

## 요청/응답 DTO 기본 규칙(강의 기준)
- Request의 데이터를 처리할 때: RequestDto
- Response로 데이터를 반환할 때: ResponseDto
- 조직마다 네이밍 규칙은 다를 수 있으나, 강의는 이 규칙을 사용합니다.

## DTO 설계 포인트(중요)
### 1) RequestDto
- 클라이언트가 보내는 값만 담습니다.
- “검증이 필요한 값”이므로 이후에 Validation과 함께 많이 엮입니다.
- 일반적으로 “id 같은 서버 생성 값”을 Request에 넣지 않습니다.

### 2) ResponseDto
- 클라이언트가 필요한 값만 담습니다.
- 내부 엔티티 구조를 숨기고, 필요한 데이터만 선별해서 제공합니다.
- 응답 포맷이 흔들리지 않도록 “클라이언트 계약” 역할을 합니다.

### 3) 변환 흐름이 핵심
- RequestDto -> Entity(또는 도메인 객체)로 변환해서 저장/처리
- Entity -> ResponseDto로 변환해서 응답
- 즉, DTO는 “입출력 경계”에 있고, 엔티티는 “내부 처리/저장”에 둡니다.

## 컨트롤러에서 DTO로 값이 들어오는 조건(바인딩 관점)
컨트롤러가 요청 데이터를 DTO로 받으려면, Spring이 DTO에 값을 채울 수 있어야 합니다.

- key-value(@ModelAttribute 계열)로 받을 때
  - 객체 생성 후 프로퍼티에 값을 넣는 방식이 많아서 setter 또는 접근 가능한 구조가 필요합니다.

- JSON(@RequestBody)로 받을 때
  - Jackson이 역직렬화를 하므로 기본 생성자와 getter/setter 같은 프로퍼티 접근 구조가 필요할 수 있습니다.

강의에서도 “객체로 변환 시 getter/기본 생성자 등이 필요”하다는 흐름이 이어집니다.

## 실무 포인트
- RequestDto와 ResponseDto는 분리하는 게 기본입니다.
  - 같은 DTO를 요청/응답에 재사용하면 필드가 섞이고 스펙이 흔들리기 쉽습니다.
- DTO는 “순수 데이터”에 가깝게 유지하는 편이 관리가 쉽습니다.
  - 비즈니스 로직은 서비스/도메인으로
- 필드가 많아지면 DTO가 비대해지므로 “기능 단위 DTO”로 쪼개는 습관이 좋습니다.
  - 예: CreateMemoRequest, UpdateMemoRequest, MemoResponse 등
- DTO 필드명은 JSON 키와 매칭되므로, 이름 설계가 곧 API 스펙이 됩니다.

## 용어 정리
| 용어 | 뜻 |
| --- | --- |
| DTO | 데이터 전송/이동 객체 |
| RequestDto | 요청 입력 데이터 객체 |
| ResponseDto | 응답 출력 데이터 객체 |
| Entity | DB/도메인 중심 내부 객체 |
| 바인딩 | 요청 데이터를 DTO 필드에 채우는 과정 |

## 공부하면서 떠올린 질문
- 엔티티를 그대로 응답으로 내리면 어떤 문제가 생길까?
- RequestDto/ResponseDto를 나누는 기준을 한 문장으로 말하면?
- DTO 변환(RequestDto->Entity, Entity->ResponseDto)은 어디 계층이 담당하는 게 좋을까?
- JSON 키와 DTO 필드명이 다르면 어떤 문제가 생길까?
